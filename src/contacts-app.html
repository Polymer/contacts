<!--
Copyright (c) 2015 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
-->

<link rel="import" href="../components/polymer/polymer.html">

<link rel="import" href="../components/core-ajax/core-ajax.html">
<link rel="import" href="../components/core-icons/core-icons.html">
<link rel="import" href="../components/core-selector/core-selector.html">
<link rel="import" href="../components/core-toolbar/core-toolbar.html">

<link rel="import" href="../elements/contacts-details.html">
<link rel="import" href="../elements/contacts-item.html">

<dom-module id="contacts-app">

  <style>

    contacts-app {
      font-family: RobotoDraft, sans-serif;
      background-color: #f5f5f5;
      color: #555;
    }

    contacts-app .list-panel {
      width: 380px;
    }

    contacts-app .toolbar {
      background-color: transparent;
      border-bottom: 1px solid #dedede;
    }

    contacts-app .toolbar-divider {
      border-top: 1px solid #fff;
    }

    contacts-app .list-item {
      height: 64px;
      cursor: pointer;
    }

    contacts-app .details-card {
      position: absolute;
      top: 64px;
      left: 4px;
      width: 640px;
      min-height: calc(100% - 64px);
      background-color: #fff;
      box-shadow: 0 1px 4px 0 rgba(0, 0, 0, 0.37);
    }

  </style>

  <template>

    <div class="list-panel" vertical layout>
      <core-toolbar class="toolbar medium-tall">
        <core-icon icon="menu"></core-icon>
        <div class="bottom" flex></div>
        <core-icon class="bottom" icon="search"></core-icon>
      </core-toolbar>
      <core-selector class="toolbar-divider" selected="{{selected}}" item="{{selectedItem}}" scroll flex>
        <template is="x-repeat" items="[[contacts]]">
          <contacts-item class="list-item" contact="[[item]]"></contacts-item>
        </template>
      </core-selector>
    </div>

    <div class="details-panel" relative flex vertical layout>
      <core-toolbar class="toolbar medium-tall"></core-toolbar>
      <div class="toolbar-divider"></div>
      <div fit scroll>
        <contacts-details class="details-card" contact="[[selectedItem.contact]]"></contacts-details>
      </div>
    </div>

    <core-ajax auto url="data/contacts.json" lastresponse="{{contacts}}"></core-ajax>

  </template>

</dom-module>

<script>

  Polymer({

    is: 'contacts-app',

    hostAttributes: 'horizontal layout',

    configure: function() {
      return {
        selected: 0,
        selectedItem: {},
        contacts: {}
      }
    }

  });

</script>
